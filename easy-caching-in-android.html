<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/BlogPosting"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/BlogPosting"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/BlogPosting"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/BlogPosting"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Easy caching in Android</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Recently I found a better way to cache data in Android. It can also be used to save preferences of users. I was using SQLite before and it was cumbersome. I had to make a table to save just few key-value pairs. Android SDK comes with an API called android ...">
<link rel="shortcut icon" href="http://www.sudhanshumishra.in/" type="">
<meta name="author" content="Sudhanshu Mishra">
<meta name="copyright" content="Sudhanshu Mishra">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta property="og:site_name" content="Shortlog" />

<meta property="og:title" content="Easy caching in android" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.sudhanshumishra.in/easy-caching-in-android.html" />
<meta name="twitter:title" content="Easy caching in android" />
<meta name="twitter:url" content="http://www.sudhanshumishra.in/easy-caching-in-android.html" />
<meta itemprop="url" content="http://www.sudhanshumishra.in/easy-caching-in-android.html" />
<meta property="og:description" content="Recently I found a better way to cache data in Android. It can also be used to save preferences of users. I was using SQLite before and it was cumbersome. I had to make a table to save just few key-value pairs. Android SDK comes with an API called android ..." />
<meta name="twitter:description" content="Recently I found a better way to cache data in Android. It can also be used to save preferences of users. I was using SQLite before and it was cumbersome. I had to make a table to save just few key-value pairs. Android SDK comes with an API called android ..." />
<meta property="og:article:published_time" content="2014-06-11" />
<meta property="og:article:author" content="Sudhanshu Mishra" >
<meta property="og:article:tag" content="Android">

<link href="http://www.sudhanshumishra.in/None" type="application/atom+xml" rel="alternate" title="Shortlog ATOM Feed"/>
<link href='//fonts.googleapis.com/css?family=Open+Sans:800italic' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/components/search.min.css">
<link rel="stylesheet" href="/theme/css/tipuesearch.css">
<link rel="stylesheet" href="/theme/css/solarized.css">
<link rel="stylesheet" href="/theme/css/main.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
</head>
<body>
<!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

<header class=" mg-header uk-navbar uk-navbar-attached">

    <div class="uk-container uk-container-center">
        <div class="uk-grid" data-uk-grid-margin>

            <a class="mg-brand uk-navbar-brand uk-hidden-small" href="http://www.sudhanshumishra.in">Shortlog</a>
            <div class="mg-tagline uk-navbar-content uk-hidden-small"></div>
            <a class="uk-navbar-toggle uk-visible-small" href="#mg-offcanvas" data-uk-offcanvas></a>
            <a class="mg-brand uk-navbar-brand uk-navbar-center uk-visible-small" href="http://www.sudhanshumishra.in">Shortlog</a>

        </div>
    </div>
</header>

<main class="mg-main">

<div class="uk-container uk-container-center">

    <div class="uk-grid" data-uk-grid-margin>
        
<div class="mg-container-social uk-width-medium-1-10 uk-hidden-small">


</div>

<div class="uk-width-medium-7-10">

    <article class="uk-article">
        <h1 class="uk-heading-large uk-article-title" itemprop="name">Easy caching in Android</h1>
        <p class="uk-article-meta"><time datetime="2014-06-11" itemprop="datePublished">Wed 11 June 2014</time> in <a href="http://www.sudhanshumishra.in/category/misc.html">misc</a></p>


        <p class="uk-article-lead" itemprop="description">Recently I found a better way to cache data in Android. It can also be used to save preferences of users. I was using SQLite before and it was cumbersome. I had to make a table to save just few key-value pairs. Android SDK comes with an API called android ...</p>
        <section itemprop="articleBody"><p>Recently I found a better way to
cache data in Android. It can also be used to save preferences of users. I was using SQLite before and it was cumbersome. I had to make a table to save just few key-value pairs.</p>
<p>Android SDK comes with an API
called <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">android.content.SharedPreferences</code>.
A<code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">SharedPreferences</code> object
points to a file containing key-value pairs and provides simple methods
to read and write them.
Each <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">SharedPreferences</code> file
is managed by the framework and can be private or shared. You’ll not
lose your data even when the device restarts. It has one more advantage,
you can also use to share data among different activities.</p>
<p>It supports primitive data types
only. You can not save objects in <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">SharedPreferences</code>.
Although you can serialize your object and store the raw string in
it.</p>
<p>To get a private handle of
the <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">SharedPreferences</code> use
following command:</p>
<div class="highlight"><pre><span class="n">SharedPreferences</span> <span class="n">myPrefs</span> <span class="o">=</span> <span class="n">getActivity</span><span class="o">().</span><span class="na">getSharedPreferences</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="s">&quot;YOUR_PREFERENCE_FILE_NAME&quot;</span><span class="o">),</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
</pre></div>


<p><strong>Note</strong>: <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">YOUR_PREFERENCE_FILE_NAME</code> can
be any valid string allowed for a file name in UNIX environment.</p>
<p>Private data will be available to your application only, it can not be accessed by other applications
installed on the device. To make it public you just need to
replace <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Context.MODE_PRIVATE</code> with
either <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">MODE_WORLD_READABLE</code> or <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">MODE_WORLD_WRITABLE</code></p>
<div class="highlight"><pre><span class="n">SharedPreferences</span> <span class="n">myPrefs</span> <span class="o">=</span> <span class="n">getSharedPreferences</span><span class="o">(</span>    <span class="s">&quot;YOUR_PREFERENCE_FILE_NAME&quot;</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_WORLD_WRITABLE</span><span class="o">);</span>
</pre></div>


<p>Publicly shared prefences are available to other apps and if they know the file identifier, they may
perform read/write operations on it.</p>
<p>Once you’ve got the handle you
can read data using following code:</p>
<div class="highlight"><pre><span class="n">String</span> <span class="n">strData</span> <span class="o">=</span> <span class="n">myPrefs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;mStrData&quot;</span><span class="o">,</span> <span class="n">DEFAULT_STRING</span><span class="o">);</span><span class="kt">boolean</span> <span class="n">boolData</span> <span class="o">=</span> <span class="n">myPrefs</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="s">&quot;mBoolData&quot;</span><span class="o">,</span> <span class="n">DEFAULT_BOOLEAN</span><span class="o">);</span><span class="kt">int</span> <span class="n">intData</span> <span class="o">=</span> <span class="n">myPrefs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;mIntData&quot;</span><span class="o">,</span> <span class="n">DEFAULT_INTEGER</span><span class="o">);</span>
</pre></div>


<p><strong>Note</strong>: If there isn’t any data
associated with the passed key, it will return the passed default
value.</p>
<p>For a complete list of methods see <a href="http://developer.android.com/reference/android/content/SharedPreferences.html">this</a>.</span></p>
<p>To save data in the <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">SharedPreferences</code> you
need to add one more line:</p>
<div class="highlight"><pre><span class="n">SharedPreferences</span><span class="o">.</span><span class="na">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">myPrefs</span><span class="o">.</span><span class="na">edit</span><span class="o">();</span>
</pre></div>


<p>Now you can easily save data in the memory.</p>
<div class="highlight"><pre><span class="n">editor</span><span class="o">.</span><span class="na">putBoolean</span><span class="o">(</span><span class="s">&quot;cacheAvailable&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span><span class="n">editor</span><span class="o">.</span><span class="na">putInt</span><span class="o">(</span><span class="s">&quot;pingCount&quot;</span><span class="o">,</span> <span class="n">myPrefs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;pingCount&quot;</span><span class="o">)++);</span><span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">&quot;mResponse&quot;</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> <span class="c1">// A web response in my case.editor.commit(); // This is important to commit changes</span>
</pre></div>


<p><strong>Update:</strong>Use editor.apply() for asynchronous call.</p>
<p>This API made my life easy. Now I do not need to write queries to do these small
things.</p>
<p>If you have suggestions, please
comment below. I’ll be happy to get feedback.</p></section>
        <hr class="uk-article-divider">
    </article>


</div>
 
    
        <div class="uk-width-medium-1-5 uk-hidden-small">
            
            <div class="uk-panel uk-panel-box">
                <form class="uk-search" action="search.html" data-uk-search>
                    <input class="uk-search-field tipue_search" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
                </form>
            </div>

            <div class="uk-panel uk-panel-box">
                <ul class="uk-nav uk-nav-side">
                    <li class="uk-nav-header">Categories</li>
                    <li class="uk-active"><a href="http://www.sudhanshumishra.in/category/misc.html">misc</a></li>
                    <li class="uk-nav-header">Pages</li>
                    
                    

                    <li class="uk-nav-divider"></li>
                    <li ><a href="http://www.sudhanshumishra.in/archives.html">Archives</a></li>
                </ul>
            </div>

            <div class="uk-panel uk-panel-box">
                <h3 class="uk-panel-title">Receive Updates</h3>
                <a rel="alternate" type="application/atom+xml" href="http://www.sudhanshumishra.in/None" class="mg-feed"><i class="uk-icon-rss uk-icon-medium"></i> ATOM</a>
            </div>
            

        </div>

    </div>

</div>

</main>

<footer class="mg-footer">
    <div class="uk-container uk-container-center uk-text-center">

        <div class="mg-icons-small uk-subnav uk-visible-small">
            <li><a rel="alternate" type="application/atom+xml" href="http://www.sudhanshumishra.in/None" class="uk-icon-button uk-icon-rss"></a></li>
        </div>

        <div class="mg-author uk-panel">
            <p></p>

            <p>Powered by <a href="http://blog.getpelican.com">Pelican</a>.<br class="uk-visible-small"> Theme <a href="https://github.com/lucachr/pelican-mg">mg</a> by <a href="https://github.com/lucachr">Luca Chiricozzi</a>.</p>
        </div>
    </div> 
</footer>

<div id="mg-offcanvas" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">

        <form class="uk-search" action="search.html" data-uk-search>
            <input class="uk-search-field" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
        </form>

        <ul class="uk-nav uk-nav-offcanvas" data-uk-nav>
            <li class="uk-nav-header">Categories</li>
            <li class="uk-active"><a href="http://www.sudhanshumishra.in/category/misc.html">misc</a></li>
            <li class="uk-nav-header">Pages</li>        
                    

            <li class="uk-nav-divider"></li>
            <li><a href="http://www.sudhanshumishra.in/">Archives</a></li>
        </ul>
    </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/components/search.min.js"></script>
<script src="/theme/js/jquery.sticky-kit.js"></script>
<script src="/theme/js/tipuesearch_set.js"></script>
<script src="/theme/js/tipuesearch.js"></script>
<script src="/theme/js/plugins.js"></script>
<script src="/theme/js/main.js"></script>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = ''; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
 var s = document.createElement('script'); s.async = true;
 s.type = 'text/javascript';
 s.src = '//' + disqus_shortname + '.disqus.com/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>


</body>
</html>
