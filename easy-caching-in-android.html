<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Easy caching in Android</title>
        <link rel="stylesheet" href="http://www.sudhanshumishra.in/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://www.sudhanshumishra.in/">Shortlog </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://www.sudhanshumishra.in/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://www.sudhanshumishra.in/easy-caching-in-android.html" rel="bookmark"
           title="Permalink to Easy caching in Android">Easy caching in Android</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-06-11T21:26:00+05:30">
                Published: Wed 11 June 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://www.sudhanshumishra.in/author/sudhanshu-mishra-noreplybloggercom.html">Sudhanshu Mishra (noreply@blogger.com)</a>
        </address>
<p>In <a href="http://www.sudhanshumishra.in/category/misc.html">misc</a>. </p>
<p>tags: <a href="http://www.sudhanshumishra.in/tag/android.html">Android</a> </p>
</footer><!-- /.post-info -->      <div dir="ltr" style="text-align: left;">
<div class="wmd-preview-section preview-content" id="wmd-preview-section-151" style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px;">
<div class="wmd-preview-section preview-content" id="wmd-preview-section-463">
<div style="margin-bottom: 15px;">
<span style="background-color: white;">Recently I found a better way to
cache data in Android. It can also be used to save preferences of users.
I was using SQLite before and it was cumbersome. I had to make a table
to save just few key-value pairs.</span>

</div>

<div style="margin-bottom: 15px;">
<span style="background-color: white;">Android SDK comes with an API
called `android.content.SharedPreferences`{style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;"}.
A`SharedPreferences`{style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;"} object
points to a file containing key-value pairs and provides simple methods
to read and write them.
Each `SharedPreferences`{style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;"} file
is managed by the framework and can be private or shared. You’ll not
lose your data even when the device restarts. It has one more advantage,
you can also use to share data among different activities.</span>

</div>

<div style="margin-bottom: 15px;">
<span style="background-color: white;">It supports primitive data types
only. You can not save objects
in `SharedPreferences`{style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;"}.
Although you can serialize your object and store the raw string in
it.</span>

</div>

<div style="margin-bottom: 15px;">
<span style="background-color: white;">To get a private handle of
the `SharedPreferences`{style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;"} use
following command:</span>

</div>

<p></div>
<div class="wmd-preview-section preview-content" id="wmd-preview-section-1442">
<div class="se-section-delimiter">
</div>
~~~~ {.prettyprint .prettyprinted}
SharedPreferences myPrefs = getActivity().getSharedPreferences(        getString("YOUR_PREFERENCE_FILE_NAME"), Context.MODE_PRIVATE);</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-bottom: 15px;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;background-color: white;&quot;</span><span class="nt">&gt;</span>**Note**: `YOUR_PREFERENCE_FILE_NAME`{style=&quot;border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, &#39;Courier New&#39;, monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;&quot;} can
be any valid string allowed for a file name in UNIX environment.<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-bottom: 15px;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;background-color: white;&quot;</span><span class="nt">&gt;</span>Private data will be available to
your application only, it can not be accessed by other applications
installed on the device. To make it public you just need to
replace `Context.MODE_PRIVATE`{style=&quot;border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, &#39;Courier New&#39;, monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;&quot;} with
either `MODE_WORLD_READABLE`{style=&quot;border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, &#39;Courier New&#39;, monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;&quot;} or `MODE_WORLD_WRITABLE`{style=&quot;border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, &#39;Courier New&#39;, monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;&quot;}.<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;wmd-preview-section preview-content&quot;</span> <span class="na">id=</span><span class="s">&quot;wmd-preview-section-1371&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;se-section-delimiter&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
~~~~ {.prettyprint .prettyprinted}
SharedPreferences myPrefs = getSharedPreferences(    &quot;YOUR_PREFERENCE_FILE_NAME&quot;, Context.MODE_WORLD_WRITABLE);
</pre></div>


<div style="margin-bottom: 15px;">
<span style="background-color: white;">Publicly shared prefences are
available to other apps and if they know the file identifier, they may
perform read/write operations on it.</span>

</div>

<div style="margin-bottom: 15px;">
<span style="background-color: white;">Once you’ve got the handle you
can read data using following code:</span>

</div>

<p></div>
<div class="wmd-preview-section preview-content" id="wmd-preview-section-1558">
<div class="se-section-delimiter">
</div>
~~~~ {.prettyprint .prettyprinted}
String strData = myPrefs.getString("mStrData", DEFAULT_STRING);boolean boolData = myPrefs.getBoolean("mBoolData", DEFAULT_BOOLEAN);int intData = myPrefs.getInt("mIntData", DEFAULT_INTEGER);</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-bottom: 15px;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;background-color: white;&quot;</span><span class="nt">&gt;</span>**Note**: If there isn’t any data
associated with the passed key, it will return the passed default
value.<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-bottom: 15px;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;background-color: white;&quot;</span><span class="nt">&gt;</span>For a complete list of methods
see [this](http://developer.android.com/reference/android/content/SharedPreferences.html).<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;margin-bottom: 15px;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">&quot;background-color: white;&quot;</span><span class="nt">&gt;</span>To save data in
the `SharedPreferences`{style=&quot;border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, &#39;Courier New&#39;, monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;&quot;} you
need to add one more line:<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;wmd-preview-section preview-content&quot;</span> <span class="na">id=</span><span class="s">&quot;wmd-preview-section-1607&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;se-section-delimiter&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
~~~~ {.prettyprint .prettyprinted}
SharedPreferences.Editor editor = myPrefs.edit();
</pre></div>


<div style="margin-bottom: 15px;">
<span style="background-color: white;">Now you can easily save data in
the memory</span>

</div>

<p></div>
<div class="wmd-preview-section preview-content" id="wmd-preview-section-1932">
<div class="se-section-delimiter">
</div>
~~~~ {.prettyprint .prettyprinted}
editor.putBoolean("cacheAvailable", true);editor.putInt("pingCount", myPrefs.getInt("pingCount")++);editor.putString("mResponse", response); // A web response in my case.editor.commit(); // This is important to commit changes
~~~~</p>
<div style="margin-bottom: 15px;">
<span style="background-color: white;">**Update:**Use editor.apply() for
asynchronous call.</span>  
<span style="background-color: white;">  
</span><span style="background-color: white;">This API made my life
easy. Now I do not need to write queries to do these small
things.</span>

</div>

<div style="margin-bottom: 15px;">
<span style="background-color: white;">If you have suggestions, please
comment below. I’ll be happy to get feedback.</span>

</div>

<p></div>
</div>
</div>
</p></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://blog.sudhanshumishra.in/">Old blog</a></li>
                            <li><a href="https://github.com/debugger22">GitHub</a></li>
                            <li><a href="https://twitter.com/debugger22">Twitter</a></li>
                        </ul>
                </div><!-- /.blogroll -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>